<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="这一节我们编写第一个eggos的应用程序。
eggos是一个 unikernel，但不妨碍在里面加上功能子模块。
一些简单的命令放在app/cmd目录下，稍微复杂一点的命令需要单独放一个目录。
第一个子程序 #  打开编辑器，在app/cmd目录下新建hello.go，写入如下代码：
package cmd import ( &#34;fmt&#34; &#34;github.com/icexin/eggos/app&#34; ) func helloMain(ctx *app.Context) error { fmt.Fprintln(ctx.Stdout, &#34;hello eggos&#34;) return nil } func init() { app.Register(&#34;hello&#34;, helloMain) } 运行 mage -v qemu，等待终端出来之后，键入 hello，如果能顺利输出如下内容，则证明我们的程序已经被顺利编译并运行。
welcome to eggos root@eggos# hello hello eggos 代码解释 #  每个子程序都有一个入口，函数签名为func (ctx *app.Context) error，最终在init函数里面调用app.Register即可注册子程序， 之后就在命令行里面调用这个子程序了。
app/cmd目录下还有很多其他子程序可以参考。"><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="1.4 hello eggos"><meta property="og:description" content="这一节我们编写第一个eggos的应用程序。
eggos是一个 unikernel，但不妨碍在里面加上功能子模块。
一些简单的命令放在app/cmd目录下，稍微复杂一点的命令需要单独放一个目录。
第一个子程序 #  打开编辑器，在app/cmd目录下新建hello.go，写入如下代码：
package cmd import ( &#34;fmt&#34; &#34;github.com/icexin/eggos/app&#34; ) func helloMain(ctx *app.Context) error { fmt.Fprintln(ctx.Stdout, &#34;hello eggos&#34;) return nil } func init() { app.Register(&#34;hello&#34;, helloMain) } 运行 mage -v qemu，等待终端出来之后，键入 hello，如果能顺利输出如下内容，则证明我们的程序已经被顺利编译并运行。
welcome to eggos root@eggos# hello hello eggos 代码解释 #  每个子程序都有一个入口，函数签名为func (ctx *app.Context) error，最终在init函数里面调用app.Register即可注册子程序， 之后就在命令行里面调用这个子程序了。
app/cmd目录下还有很多其他子程序可以参考。"><meta property="og:type" content="article"><meta property="og:url" content="https://eggos.icexin.com/docs/quick-start/hello-eggos/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2021-07-06T01:01:34+08:00"><title>1.4 hello eggos | The book of eggos</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.958cea7827621d6fbcb3acf091344c3e44e3d2a9428f9c3c38bb9eb37bf8c45d.css integrity="sha256-lYzqeCdiHW+8s6zwkTRMPkTj0qlCj5w8OLues3v4xF0=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script><script defer src=/en.search.min.c1e57f7927f41b163b324ff7269e8d0736d65e43a21e8351130144412c0f4262.js integrity="sha256-weV/eSf0GxY7Mk/3Jp6NBzbWXkOiHoNREwFEQSwPQmI=" crossorigin=anonymous></script><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','G-4S27LHKGHE','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4S27LHKGHE"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-4S27LHKGHE',{anonymize_ip:!1})}</script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a href=/><span>The book of eggos</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><span>第一章 快速开始</span><ul><li><a href=https://eggos.icexin.com/docs/quick-start/boot-from-cd/>1.1 从ISO镜像启动</a></li><li><a href=https://eggos.icexin.com/docs/quick-start/play-eggos/>1.2 体验eggos</a></li><li><a href=https://eggos.icexin.com/docs/quick-start/prepare-env/>1.3 搭建开发环境</a></li><li><a href=https://eggos.icexin.com/docs/quick-start/hello-eggos/ class=active>1.4 hello eggos</a></li></ul></li><li><span>第二章 Boot Loader</span><ul><li><a href=https://eggos.icexin.com/docs/boot-loader/grub/>2.1 使用grub</a></li></ul></li><li><span>第三章 最小化Go Runtime环境</span><ul></ul></li><li><span>第四章 线程与调度器</span><ul></ul></li><li><span>第五章 系统调用与中断</span><ul></ul></li><li><span>第六章 外设与驱动</span><ul></ul></li><li><span>第七章 网卡驱动与协议栈</span><ul></ul></li><li><span>第八章 用户程序</span><ul></ul></li></ul><ul><li><a href=https://icexin.com target=_blank rel=noopener>icexin的站点</a></li><li><a href=https://github.com/icexin/eggos target=_blank rel=noopener>eggos源码</a></li></ul></nav><script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>1.4 hello eggos</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#第一个子程序>第一个子程序</a></li><li><a href=#代码解释>代码解释</a></li></ul></nav></aside></header><article class=markdown><p>这一节我们编写第一个eggos的应用程序。</p><p>eggos是一个
<a href=https://en.wikipedia.org/wiki/Unikernel>unikernel</a>，但不妨碍在里面加上功能子模块。</p><p>一些简单的命令放在<code>app/cmd</code>目录下，稍微复杂一点的命令需要单独放一个目录。</p><h1 id=第一个子程序>第一个子程序
<a class=anchor href=#%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%ad%90%e7%a8%8b%e5%ba%8f>#</a></h1><p>打开编辑器，在<code>app/cmd</code>目录下新建<code>hello.go</code>，写入如下代码：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#a6e22e>cmd</span>

<span style=color:#f92672>import</span> (
	<span style=color:#e6db74>&#34;fmt&#34;</span>

	<span style=color:#e6db74>&#34;github.com/icexin/eggos/app&#34;</span>
)

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>helloMain</span>(<span style=color:#a6e22e>ctx</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>Context</span>) <span style=color:#66d9ef>error</span> {
	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Fprintln</span>(<span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>Stdout</span>, <span style=color:#e6db74>&#34;hello eggos&#34;</span>)
	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>init</span>() {
	<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>Register</span>(<span style=color:#e6db74>&#34;hello&#34;</span>, <span style=color:#a6e22e>helloMain</span>)
}
</code></pre></div><p>运行 <code>mage -v qemu</code>，等待终端出来之后，键入 <code>hello</code>，如果能顺利输出如下内容，则证明我们的程序已经被顺利编译并运行。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>welcome to eggos
root@eggos# hello
hello eggos
</code></pre></div><h1 id=代码解释>代码解释
<a class=anchor href=#%e4%bb%a3%e7%a0%81%e8%a7%a3%e9%87%8a>#</a></h1><p>每个子程序都有一个入口，函数签名为<code>func (ctx *app.Context) error</code>，最终在<code>init</code>函数里面调用<code>app.Register</code>即可注册子程序，
之后就在命令行里面调用这个子程序了。</p><p><code>app/cmd</code>目录下还有很多其他子程序可以参考。</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/icexin/eggos-book/commit/5ff1109e9e20b8e8d750fd5bc457c3f98b58fa3b title="Last modified by icexin | July 5, 2021" target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>July 5, 2021</span></a></div><div><a class="flex align-center" href=https://github.com/icexin/eggos-book/edit/main/content/docs/quick-start/hello-eggos.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script></footer><div class=book-comments><script src=https://utteranc.es/client.js repo=icexin/doc-comments issue-term=pathname theme=github-light crossorigin=anonymous async></script><noscript>Please enable JavaScript to view the <a href=https://github.com/utterance>comments powered by utterances.</a></noscript></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#第一个子程序>第一个子程序</a></li><li><a href=#代码解释>代码解释</a></li></ul></nav></div></aside></main></body></html>