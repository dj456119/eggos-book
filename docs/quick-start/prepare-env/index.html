<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="我们在前一节快速体验了eggos的基本功能，这一节我们搭建一下eggos的开发环境，为后面的深入分析eggos打下基础。
环境准备 #  基本工具如下：
 go1.13.x mage构建工具 gcc和gdb，需要能生成elf32格式的。 qemu虚拟机  各平台的安装步骤如下所述。
Linux(ubuntu) #  Go语言编译器 #  $ curl -LO https://golang.google.cn/dl/go1.13.15.linux-amd64.tar.gz $ mkdir $HOME/local && tar xf -C $HOME/local go1.13.15.linux-amd64.tar.gz # 将$HOME/local/go/bin加入PATH环境变量，这里以bash为例 $ echo 'export PATH=$HOME/local/go/bin:$PATH' >> $HOME/.bashrc # 将$HOME/go/bin也加入环境变量，方便执行编译出来的go工具 $ echo 'export PATH=$HOME/go/bin:$PATH' >> $HOME/.bashrc $ source $HOME/.bashrc # 设置GOPROXY环境变量，加速package下载 $ go env -w GO111MODULE=on $ go env -w GOPROXY=https://goproxy.cn 按照上面命令执行完毕之后，输入go version命令，如果能正常输入go版本号就证明安装成功了。
mage构建工具 #  mage是一个类似make的构建工具，但它的makefile是用go语言编写的，可以跨平台，eggos最初是用的makefile，后面切换到mage上了。安装mage也非常简单。
$ go get github."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="1.3 搭建开发环境"><meta property="og:description" content="我们在前一节快速体验了eggos的基本功能，这一节我们搭建一下eggos的开发环境，为后面的深入分析eggos打下基础。
环境准备 #  基本工具如下：
 go1.13.x mage构建工具 gcc和gdb，需要能生成elf32格式的。 qemu虚拟机  各平台的安装步骤如下所述。
Linux(ubuntu) #  Go语言编译器 #  $ curl -LO https://golang.google.cn/dl/go1.13.15.linux-amd64.tar.gz $ mkdir $HOME/local && tar xf -C $HOME/local go1.13.15.linux-amd64.tar.gz # 将$HOME/local/go/bin加入PATH环境变量，这里以bash为例 $ echo 'export PATH=$HOME/local/go/bin:$PATH' >> $HOME/.bashrc # 将$HOME/go/bin也加入环境变量，方便执行编译出来的go工具 $ echo 'export PATH=$HOME/go/bin:$PATH' >> $HOME/.bashrc $ source $HOME/.bashrc # 设置GOPROXY环境变量，加速package下载 $ go env -w GO111MODULE=on $ go env -w GOPROXY=https://goproxy.cn 按照上面命令执行完毕之后，输入go version命令，如果能正常输入go版本号就证明安装成功了。
mage构建工具 #  mage是一个类似make的构建工具，但它的makefile是用go语言编写的，可以跨平台，eggos最初是用的makefile，后面切换到mage上了。安装mage也非常简单。
$ go get github."><meta property="og:type" content="article"><meta property="og:url" content="https://eggos.icexin.com/docs/quick-start/prepare-env/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2021-07-04T21:58:30+08:00"><title>1.3 搭建开发环境 | The book of eggos</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.958cea7827621d6fbcb3acf091344c3e44e3d2a9428f9c3c38bb9eb37bf8c45d.css integrity="sha256-lYzqeCdiHW+8s6zwkTRMPkTj0qlCj5w8OLues3v4xF0=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script><script defer src=/en.search.min.55b7425e081263b78527088badda62e24804d950916089b51398dcb1ec4fb9ca.js integrity="sha256-VbdCXggSY7eFJwiLrdpi4kgE2VCRYIm1E5jcsexPuco=" crossorigin=anonymous></script><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','G-4S27LHKGHE','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4S27LHKGHE"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-4S27LHKGHE',{anonymize_ip:!1})}</script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a href=/><span>The book of eggos</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><span>第一章 快速开始</span><ul><li><a href=https://eggos.icexin.com/docs/quick-start/boot-from-cd/>1.1 从ISO镜像启动</a></li><li><a href=https://eggos.icexin.com/docs/quick-start/play-eggos/>1.2 体验eggos</a></li><li><a href=https://eggos.icexin.com/docs/quick-start/prepare-env/ class=active>1.3 搭建开发环境</a></li></ul></li><li><span>第二章 Boot Loader</span><ul><li><a href=https://eggos.icexin.com/docs/boot-loader/grub/>2.1 使用grub</a></li></ul></li><li><span>第三章 最小化Go Runtime环境</span><ul></ul></li><li><span>第四章 线程与调度器</span><ul></ul></li><li><span>第五章 系统调用与中断</span><ul></ul></li><li><span>第六章 外设与驱动</span><ul></ul></li><li><span>第七章 网卡驱动与协议栈</span><ul></ul></li><li><span>第八章 用户程序</span><ul></ul></li></ul><ul><li><a href=https://icexin.com target=_blank rel=noopener>icexin的站点</a></li><li><a href=https://github.com/icexin/eggos target=_blank rel=noopener>eggos源码</a></li></ul></nav><script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>1.3 搭建开发环境</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#环境准备>环境准备</a><ul><li><a href=#linuxubuntu>Linux(ubuntu)</a><ul><li><a href=#go语言编译器>Go语言编译器</a></li><li><a href=#mage构建工具>mage构建工具</a></li><li><a href=#c语言开发套件>C语言开发套件</a></li><li><a href=#qemu虚拟机>Qemu虚拟机</a></li></ul></li><li><a href=#macos>MacOS</a><ul><li><a href=#go语言编译器-1>Go语言编译器</a></li><li><a href=#mage构建工具-1>mage构建工具</a></li><li><a href=#c语言开发套件-1>C语言开发套件</a></li><li><a href=#qemu虚拟机-1>Qemu虚拟机</a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><p>我们在前一节快速体验了eggos的基本功能，这一节我们搭建一下eggos的开发环境，为后面的深入分析eggos打下基础。</p><h1 id=环境准备>环境准备
<a class=anchor href=#%e7%8e%af%e5%a2%83%e5%87%86%e5%a4%87>#</a></h1><p>基本工具如下：</p><ul><li>go1.13.x</li><li>mage构建工具</li><li>gcc和gdb，需要能生成elf32格式的。</li><li>qemu虚拟机</li></ul><p>各平台的安装步骤如下所述。</p><h2 id=linuxubuntu>Linux(ubuntu)
<a class=anchor href=#linuxubuntu>#</a></h2><h3 id=go语言编译器>Go语言编译器
<a class=anchor href=#go%e8%af%ad%e8%a8%80%e7%bc%96%e8%af%91%e5%99%a8>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ curl -LO https://golang.google.cn/dl/go1.13.15.linux-amd64.tar.gz
$ mkdir $HOME/local <span style=color:#f92672>&amp;&amp;</span> tar xf -C $HOME/local go1.13.15.linux-amd64.tar.gz
<span style=color:#75715e># 将$HOME/local/go/bin加入PATH环境变量，这里以bash为例</span>
$ echo <span style=color:#e6db74>&#39;export PATH=$HOME/local/go/bin:$PATH&#39;</span> &gt;&gt; $HOME/.bashrc
<span style=color:#75715e># 将$HOME/go/bin也加入环境变量，方便执行编译出来的go工具</span>
$ echo <span style=color:#e6db74>&#39;export PATH=$HOME/go/bin:$PATH&#39;</span> &gt;&gt; $HOME/.bashrc
$ source $HOME/.bashrc
<span style=color:#75715e># 设置GOPROXY环境变量，加速package下载</span>
$ go env -w GO111MODULE<span style=color:#f92672>=</span>on
$ go env -w GOPROXY<span style=color:#f92672>=</span>https://goproxy.cn
</code></pre></div><p>按照上面命令执行完毕之后，输入<code>go version</code>命令，如果能正常输入go版本号就证明安装成功了。</p><h3 id=mage构建工具>mage构建工具
<a class=anchor href=#mage%e6%9e%84%e5%bb%ba%e5%b7%a5%e5%85%b7>#</a></h3><p>mage是一个类似make的构建工具，但它的makefile是用go语言编写的，可以跨平台，eggos最初是用的makefile，后面切换到mage上了。安装mage也非常简单。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ go get github.com/magefile/mage
</code></pre></div><h3 id=c语言开发套件>C语言开发套件
<a class=anchor href=#c%e8%af%ad%e8%a8%80%e5%bc%80%e5%8f%91%e5%a5%97%e4%bb%b6>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ sudo apt-get install build-essential gdb
</code></pre></div><h3 id=qemu虚拟机>Qemu虚拟机
<a class=anchor href=#qemu%e8%99%9a%e6%8b%9f%e6%9c%ba>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ sudo apt-get install qemu-system-x86
</code></pre></div><h2 id=macos>MacOS
<a class=anchor href=#macos>#</a></h2><h3 id=go语言编译器-1>Go语言编译器
<a class=anchor href=#go%e8%af%ad%e8%a8%80%e7%bc%96%e8%af%91%e5%99%a8-1>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ curl -LO https://golang.google.cn/dl/go1.13.15.darwin-amd64.tar.gz
$ mkdir $HOME/local <span style=color:#f92672>&amp;&amp;</span> tar xf -C $HOME/local go1.13.15.darwin-amd64.tar.gz
<span style=color:#75715e># 将$HOME/local/go/bin加入PATH环境变量，这里以zsh为例</span>
$ echo <span style=color:#e6db74>&#39;export PATH=$HOME/local/go/bin:$PATH&#39;</span> &gt;&gt; $HOME/.zshrc
<span style=color:#75715e># 将$HOME/go/bin也加入环境变量，方便执行编译出来的go工具</span>
$ echo <span style=color:#e6db74>&#39;export PATH=$HOME/go/bin:$PATH&#39;</span> &gt;&gt; $HOME/.zshrc
$ source $HOME/.zshrc
<span style=color:#75715e># 设置GOPROXY环境变量，加速package下载</span>
$ go env -w GO111MODULE<span style=color:#f92672>=</span>on
$ go env -w GOPROXY<span style=color:#f92672>=</span>https://goproxy.cn
</code></pre></div><p>按照上面命令执行完毕之后，输入<code>go version</code>命令，如果能正常输入go版本号就证明安装成功了。</p><h3 id=mage构建工具-1>mage构建工具
<a class=anchor href=#mage%e6%9e%84%e5%bb%ba%e5%b7%a5%e5%85%b7-1>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ go get github.com/magefile/mage
</code></pre></div><h3 id=c语言开发套件-1>C语言开发套件
<a class=anchor href=#c%e8%af%ad%e8%a8%80%e5%bc%80%e5%8f%91%e5%a5%97%e4%bb%b6-1>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ brew install x86_64-elf-binutils x86_64-elf-gcc x86_64-elf-gdb
</code></pre></div><h3 id=qemu虚拟机-1>Qemu虚拟机
<a class=anchor href=#qemu%e8%99%9a%e6%8b%9f%e6%9c%ba-1>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ brew install qemu
</code></pre></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/icexin/eggos-book/commit/b021977797f376a0dbe617b2cb5cd260aefcd080 title="Last modified by icexin | July 4, 2021" target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>July 4, 2021</span></a></div><div><a class="flex align-center" href=https://github.com/icexin/eggos-book/edit/main/content/docs/quick-start/prepare-env.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script></footer><div class=book-comments><script src=https://utteranc.es/client.js repo=icexin/doc-comments issue-term=pathname theme=github-light crossorigin=anonymous async></script><noscript>Please enable JavaScript to view the <a href=https://github.com/utterance>comments powered by utterances.</a></noscript></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#环境准备>环境准备</a><ul><li><a href=#linuxubuntu>Linux(ubuntu)</a><ul><li><a href=#go语言编译器>Go语言编译器</a></li><li><a href=#mage构建工具>mage构建工具</a></li><li><a href=#c语言开发套件>C语言开发套件</a></li><li><a href=#qemu虚拟机>Qemu虚拟机</a></li></ul></li><li><a href=#macos>MacOS</a><ul><li><a href=#go语言编译器-1>Go语言编译器</a></li><li><a href=#mage构建工具-1>mage构建工具</a></li><li><a href=#c语言开发套件-1>C语言开发套件</a></li><li><a href=#qemu虚拟机-1>Qemu虚拟机</a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>